<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Using the LibBi wrapper to launch LibBi — run • rbi</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Using the LibBi wrapper to launch LibBi — run"><meta property="og:description" content="The method run launches LibBi with a particular set of command
  line arguments. Normally, this function would not be run by the user,
  but instead one of the client functions sample,
  filter, or optimise, or rewrite,
  which pass any options on to run. Note that any options specified
  here are stored in the libbi object and do not have to be
  specified again if another command is run on the object."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rbi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.10.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">Package vignette</li>
    <li>
      <a href="../articles/introduction.html">Introduction to rbi</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/sbfnk/rbi/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Using the LibBi wrapper to launch LibBi</h1>
    <small class="dont-index">Source: <a href="https://github.com/sbfnk/rbi/blob/HEAD/R/libbi.R" class="external-link"><code>R/libbi.R</code></a></small>
    <div class="hidden name"><code>run.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The method <code>run</code> launches <code>LibBi</code> with a particular set of command
  line arguments. Normally, this function would not be run by the user,
  but instead one of the client functions <code><a href="sample.html">sample</a></code>,
  <code><a href="filter.html">filter</a></code>, or <code><a href="optimise.html">optimise</a></code>, or <code><a href="rewrite.html">rewrite</a></code>,
  which pass any options on to <code>run</code>. Note that any options specified
  here are stored in the <code><a href="libbi.html">libbi</a></code> object and do not have to be
  specified again if another command is run on the object.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for libbi</span></span>
<span><span class="fu">run</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">client</span>,</span>
<span>  proposal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"prior"</span><span class="op">)</span>,</span>
<span>  <span class="va">model</span>,</span>
<span>  <span class="va">fix</span>,</span>
<span>  <span class="va">options</span>,</span>
<span>  <span class="va">config</span>,</span>
<span>  log_file_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>  <span class="va">init</span>,</span>
<span>  <span class="va">input</span>,</span>
<span>  <span class="va">obs</span>,</span>
<span>  time_dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>  coord_dims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">working_folder</span>,</span>
<span>  output_all <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sample_obs <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">thin</span>,</span>
<span>  <span class="va">output_every</span>,</span>
<span>  chain <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  debug <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>a <code><a href="libbi.html">libbi</a></code> object; if this is not given, an empty
<code><a href="libbi.html">libbi</a></code> object will be created</p></dd>


<dt>client</dt>
<dd><p>client to pass to LibBi</p></dd>


<dt>proposal</dt>
<dd><p>proposal distribution to use; either "model" (default:
proposal distribution in the model) or "prior" (propose from the prior
distribution)</p></dd>


<dt>model</dt>
<dd><p>either a character vector giving the path to a model file
(typically ending in ".bi"), or a <code>bi_model</code> object; by default, will
use any model given in <code>x</code></p></dd>


<dt>fix</dt>
<dd><p>any variable to fix, as a named vector</p></dd>


<dt>options</dt>
<dd><p>deprecated; pass options directly, see documentation for
<code>...</code></p></dd>


<dt>config</dt>
<dd><p>path to a configuration file, containing multiple arguments</p></dd>


<dt>log_file_name</dt>
<dd><p>path to a file to text file to report the output of
<code>LibBi</code>; if set to an empty vector (<code>character(0)</code>) or an empty
string (""), which is the default, a temporary log file will be generated</p></dd>


<dt>init</dt>
<dd><p>initialisation of the model, either supplied as a list of values
and/or data frames, or a (netcdf) file name, or a <code><a href="libbi.html">libbi</a></code>
object which has been run (in which case the output of that run is used).
If the object given as <code>x</code> has been run before, it will be used here
with <code>init-np</code> set to the last iteration of the previous run, unless
<code>init</code> is given explicitly.</p></dd>


<dt>input</dt>
<dd><p>input of the model, either supplied as a list of values and/or
data frames, or a (netcdf) file name, or a <code><a href="libbi.html">libbi</a></code> object which
has been run (in which case the output of that run is used as input)</p></dd>


<dt>obs</dt>
<dd><p>observations of the model, either supplied as a list of values
and/or data frames, or a (netcdf) file name, or a <code><a href="libbi.html">libbi</a></code>
object which has been run (in which case the output of that run is used as
observations)</p></dd>


<dt>time_dim</dt>
<dd><p>The time dimension in any R objects that have been passed
(<code>init</code>, <code>input</code>) and <code>obs</code>); if NULL (default), will be
guessed from the given observation</p></dd>


<dt>coord_dims</dt>
<dd><p>The coord dimension(s) in any <code>obs</code> R objects that
have been passed; if NULL (default), will be guessed from the given
observation file given</p></dd>


<dt>working_folder</dt>
<dd><p>deprecated; path to a folder from which to run
<code>LibBi</code>; default to a temporary folder. Use the <code>build_dir</code>
option instead, which will be translated into the <code>--build-dir</code> option
of LibBi instead</p></dd>


<dt>output_all</dt>
<dd><p>deprecated; if set to TRUE, all parameters, states and
observations will be saved; good for debugging</p></dd>


<dt>sample_obs</dt>
<dd><p>deprecated; if set to TRUE, will sample observations. Use
the <code>sample_obs</code> function instead.</p></dd>


<dt>thin</dt>
<dd><p>any thinning of MCMC chains (1 means all will be kept, 2 skips
every other sample etc.); note that <code>LibBi</code> itself will write all data
to the disk. Only when the results are read in with <code><a href="bi_read.html">bi_read</a></code>
will thinning be applied.</p></dd>


<dt>output_every</dt>
<dd><p>real; if given, <code>noutputs</code> will be set so that there
is output every <code>output_every</code> time steps; if set to 0, only generate
an output at the final time</p></dd>


<dt>chain</dt>
<dd><p>logical; if set to TRUE and <code>x</code> has been run before, the
previous output file will be used as <code>init</code> file, and <code>init-np</code>
will be set to the last iteration of the previous run (unless
target=="prediction"). This is useful for running inference chains.</p></dd>


<dt>seed</dt>
<dd><p>Either a number (the seed to supply to <code>LibBi</code>), or a
logical variable: TRUE if a seed is to be generated for <code>RBi</code>, FALSE
if <code>LibBi</code> is to generate its own seed</p></dd>


<dt>debug</dt>
<dd><p>logical; if TRUE, print more verbose messages and write all
variables to the output file, irrespective of their setting of 'has_output'</p></dd>


<dt>...</dt>
<dd><p>list of additional arguments to pass to the call to <code>LibBi</code>.
Any arguments starting with `enable`/`disable` can be specified as boolean
(e.g., `assert=TRUE` or `cuda=TRUE`). Any `dry-` options can be specified
with a `"dry"` argument, e.g., `dry="parse"`. Any options that would be
specified with `with`/`without` can be specified as character vector to an
option named `with`/`without`, respectively, e.g.
with="transform-obs-to-state".</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>an updated <code><a href="libbi.html">libbi</a></code> object, except if <code>client</code> is
  'rewrite', in which case invisible NULL will be returned but the rewritten
  model code printed</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="libbi.html">libbi</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">bi_object</span> <span class="op">&lt;-</span> <span class="fu"><a href="libbi.html">libbi</a></span><span class="op">(</span>model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"rbi"</span>, <span class="st">"PZ.bi"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="va">bi_object</span> <span class="op">&lt;-</span> <span class="fu">run</span><span class="op">(</span><span class="va">bi_object</span>, client <span class="op">=</span> <span class="st">"sample"</span>, target <span class="op">=</span> <span class="st">"prior"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="bi_file_summary.html">bi_file_summary</a></span><span class="op">(</span><span class="va">bi_object</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> File /tmp/RtmpxnpDmO/PZ36ea7ea04f85/PZ_output36ea204c1c74.nc (NC_FORMAT_NETCDF4):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      7 variables (excluding dimension variables):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         double time[nr]   (Contiguous storage)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         double alpha[np,nr]   (Contiguous storage)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         double mu[np]   (Contiguous storage)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         double sigma[np]   (Contiguous storage)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         double P[np,nr]   (Contiguous storage)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         double Z[np,nr]   (Contiguous storage)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         8 byte int clock[]   (Contiguous storage)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      2 dimensions:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         nr  Size:1 (no dimvar)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         np  Size:1 (no dimvar)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3 global attributes:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         libbi_schema: Simulator</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         libbi_schema_version: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         libbi_version: 1.4.5</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Pierre E. Jacob, Sebastian Funk.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

